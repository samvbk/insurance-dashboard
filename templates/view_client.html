{% extends "layout.html" %}
{% block content %}
    <div style="display: flex; justify-content: space-between; align-items: center;">
        <h2>Client Details</h2>
        <a href="{{ url_for('add_policy', client_id=client.id) }}" class="button">Add New Policy</a>
    </div>

    <div class="card">
        <h3>{{ client.name }}</h3>
        <p><strong>Phone:</strong> {{ client.phone }}</p>
        <p><strong>Email:</strong> {{ client.email }}</p>
    </div>

    <h3 style="margin-top: 30px;">Policies</h3>
    <table>
        <thead>
            <tr>
                <th>Policy Number</th>
                <th>Vehicle Number</th>
                <th>Insurance Company</th>
                <th>Premium</th>
                <th>Policy Period</th>
            </tr>
        </thead>
        <tbody>
            {% for policy in policies %}
            <tr>
                <td>{{ policy.policy_number }}</td>
                <td>{{ policy.vehicle_number }}</td>
                <td>{{ policy.insurance_company }}</td>
                <td>â‚¹{{ "%.2f"|format(policy.premium) }}</td>
                <td>{{ policy.policy_start_date }} to {{ policy.policy_end_date }}</td>
            </tr>
            {% else %}
            <tr>
                <td colspan="5" style="text-align: center;">No policies found for this client.</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
{% endblock %}